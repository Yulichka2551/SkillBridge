paths:
  /chats:
    post:
      security:
        - cookieAuth: []
      tags:
        - Chats
      summary: Create a new chat.
      description: Create and save a new chat to database.
      produces:
        - application/json
      requestBody:
        required: true
        description: Create new chat.
        content:
          application/json:
            schema:
              $ref: '#/definitions/chatBody'
            example:
              member: 6421d9833cdf38b706756dff
              memberRole: student
      responses:
        201:
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/definitions/chat'
              example:
                _id: 64a54c6c7bca605aaf2da66c
                members:
                  - user: 6491d003a634c3c427b69daa
                    role: tutor
                  - user: 6421d9833cdf38b706756dff
                    role: student
                createdAt: 2024-08-01T13:25:36.292Z
                updatedAt: 2024-08-01T13:25:36.292Z
        401:
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/Error'
              example:
                status: 401
                code: UNAUTHORIZED
                message: The requested URL requires user authorization.
    get:
      security:
        - cookieAuth: []
      tags:
        - Chats
      summary: Find all chats for current user.
      description: Finds and returns all chats for current user by their token.
      produces:
        - application/json
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/definitions/chats'
              example:
                - _id: 67604def753afa7bbd3bd98a
                  members:
                    - user:
                        _id: 67519181170a70623366d30c
                        firstName: Diana
                        lastName: Romovych
                        professionalSummary: ''
                        photo: null
                      role: tutor
                    - user:
                        _id: 673f342709e56a9071f5308c
                        firstName: Valentyna
                        lastName: Dudchak
                        professionalSummary: ''
                        photo: 1733337385040-photofordemo.jpg
                      role: student
                  createdAt: 2024-12-16T15:57:35.632Z
                  updatedAt: 2024-12-16T15:57:35.949Z
                  deletedFor: []
                  latestMessage:
                    _id: 67604def753afa7bbd3bd98c
                    author:
                      _id: 67519181170a70623366d30c
                      firstName: Diana
                      lastName: Romovych
                    authorRole: tutor
                    text: Hi! How is your assignment going?
                    chat: 67604def753afa7bbd3bd98a
                    clearedFor: []
                    createdAt: 2024-12-16T15:57:35.862Z
                    updatedAt: 2024-12-16T15:57:35.862Z
                - _id: 67604eca753afa7bbd3bd9c1
                  members:
                    - user:
                        _id: 67519181170a70623366d30c
                        firstName: Diana
                        lastName: Romovych
                        professionalSummary: ''
                        photo: null
                      role: tutor
                    - user:
                        _id: 6735ff2cc8f5e44cc3de002d
                        firstName: Pavlo
                        lastName: Butynets
                        professionalSummary: ''
                        photo: null
                      role: student
                  createdAt: 2024-12-16T16:01:14.667Z
                  updatedAt: 2024-12-16T16:01:14.991Z
                  deletedFor: []
                  latestMessage:
                    _id: 67604eca753afa7bbd3bd9c3
                    author:
                      _id: 67519181170a70623366d30c
                      firstName: Diana
                      lastName: Romovych
                    authorRole: tutor
                    text: Hi! Are there any issues with your assignment?
                    chat: 67604eca753afa7bbd3bd9c1
                    clearedFor: []
                    createdAt: 2024-12-16T16:01:14.916Z
                    updatedAt: 2024-12-16T16:01:14.916Z
  /chats/{id}:
    delete:
      security:
        - cookieAuth: []
      tags:
        - Chats
      summary: Deletes Chat by ID
      description: Finds and deletes Chat with the specified ID.
      produces:
        - application/json
      parameters:
        - name: id
          in: path
          required: true
          description: ID of the Chat that needs to be deleted
          type: string
      responses:
        204:
          description: No Content
        400:
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/Error'
              example:
                status: 400
                code: INVALID_ID
                message: ID is invalid.
        401:
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/Error'
              example:
                status: 401
                code: UNAUTHORIZED
                message: The requested URL requires user authorization.
        403:
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/Error'
              example:
                status: 403
                code: FORBIDDEN
                message: You do not have permission to perform this action.
        404:
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/Error'
              example:
                status: 404
                code: DOCUMENT_NOT_FOUND
                message: Chat with the specified id was not found.
    patch:
      security:
        - cookieAuth: []
      tags:
        - Chats
      summary: Marks chat as deleted by ID for current user
      description: Finds Chat with the specified ID and adds `deletedFor` field to it with current user.
      produces:
        - application/json
      parameters:
        - name: id
          in: path
          required: true
          description: ID of the Chat that needs to be marked as deleted
          type: string
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/definitions/chat'
              example:
                _id: 67604eca753afa7bbd3bd9c1
                members:
                  - user: 67519181170a70623366d30c
                    role: tutor
                  - user: 6735ff2cc8f5e44cc3de002d
                    role: student
                deletedFor:
                  - user: 67519181170a70623366d30c
                createdAt: 2024-12-16T16:01:14.667Z
                updatedAt: 2024-12-16T16:20:01.463Z
                latestMessage: 67604eca753afa7bbd3bd9c3
        400:
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/Error'
              example:
                status: 400
                code: INVALID_ID
                message: ID is invalid.
        401:
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/Error'
              example:
                status: 401
                code: UNAUTHORIZED
                message: The requested URL requires user authorization.
        403:
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/Error'
              example:
                status: 403
                code: FORBIDDEN
                message: You do not have permission to perform this action.
        404:
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/Error'
              example:
                status: 404
                code: DOCUMENT_NOT_FOUND
                message: Chat with the specified id was not found.
